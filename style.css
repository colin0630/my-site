/* =============================
   Global theme (light/dark only)
   ============================= */

/* Reset & base */
* { box-sizing: border-box }
html { scroll-behavior: smooth }
body {
  margin: 0;
  font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans TC", "PingFang TC", Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  color: var(--section-fg);
  background: var(--bg);
}
a { color: inherit; text-decoration: none }
img { max-width: 100%; display: block }
.container { max-width: 1080px; margin: 0 auto; padding: 0 20px }
.muted { color: var(--muted) }
.grid > * { min-width: 0 }

/* --------- Theme tokens --------- */
:root, [data-theme="dark"] {
  --white:#fff; --black:#000;

  --bg:#0b1220;
  --bg-2:#0f172a;
  --surface:#0f172a;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --divider: rgba(255,255,255,0.08);
  --shadow: 0 8px 24px rgba(0,0,0,.45);

  --section-fg: var(--text);
  --hero-fg:#ffffff;
  --card:#1a2236cc;
  --card-border: rgba(255,255,255,0.14);
  --card-fg:#ffffff;

  /* hero accent */
  --hero-a: rgba(139,92,246,.35);
}

[data-theme="light"] {
  --bg:#f8fafc;
  --bg-2:#eef2ff;
  --surface:#ffffff;
  --text:#0f172a;
  --muted:#475569;
  --divider: rgba(2,6,23,0.08);
  --shadow: 0 8px 24px rgba(2,6,23,.08);

  --section-fg: var(--text);
  --hero-fg:#0f172a;
  --card:#ffffff;
  --card-border: rgba(15,23,42,0.10);
  --card-fg:#0f172a;
}

/* --------- Nav --------- */
.nav {
  position: sticky; top: 0; z-index: 50;
  background: color-mix(in oklab, var(--surface) 72%, transparent);
  backdrop-filter: saturate(180%) blur(10px);
  border-bottom: 1px solid var(--divider);
}
.nav-inner { display: flex; align-items: center; justify-content: space-between; gap: 16px; padding: 10px 0 }
.brand { display: flex; align-items: center; gap: 12px }
.avatar { width: 44px; height: 44px; border-radius: 999px; object-fit: cover; border: 1px solid var(--divider) }
.name { font-weight: 800 }
.role { font-size: .9rem; color: var(--muted) }
.links a, .links button { margin-left: 14px }

/* --------- Buttons --------- */
.btn {
  display: inline-block; padding: .6rem 1rem; border-radius: 14px; border: 1px solid currentColor; cursor: pointer;
  transition: transform .15s ease, box-shadow .2s ease, background .2s ease, opacity .2s ease;
}
.btn.small { padding: .4rem .75rem; font-size: .9rem }
.btn:hover { transform: translateY(-1px) }
.btn:active { transform: translateY(0) }
.btn.primary { background: #8b5cf6; color: #fff; border: none; font-weight: 700 }
.btn.primary:hover { background: #7c3aed }
.btn.ghost { background: transparent; border: 1px solid color-mix(in oklab, currentColor 55%, transparent) }

/* --------- Hero --------- */
.hero {
  position: relative; padding: 80px 0 56px; text-align: left;
  color: var(--hero-fg);
  background:
    radial-gradient(1200px 520px at 0% 0%, var(--hero-a), transparent 62%),
    linear-gradient(180deg, color-mix(in oklab, var(--bg) 86%, var(--black) 14%) 0%, var(--bg) 60%);
}
.hero-bg { position: absolute; inset: 0; pointer-events: none }
.hero h1 {
  font-size: clamp(2rem, 4.3vw, 3rem);
  line-height: 1.25; letter-spacing: .2px; font-weight: 800; margin: 0 0 14px;
}
.hero .lead {
  font-size: clamp(1rem, 1.25vw, 1.1rem);
  line-height: 1.85;
  color: color-mix(in oklab, var(--hero-fg) 96%, transparent);
  margin: 8px 0; max-width: 820px;
}
.hero .btn { margin-right: 10px }

/* --------- Sections --------- */
.section { padding: 60px 0; color: var(--section-fg) }
.section h2 {
  font-size: clamp(1.35rem, 2.2vw, 1.8rem);
  letter-spacing: .2px; margin: 0 0 18px; font-weight: 800;
}
.section.alt { background: var(--bg-2) }

/* --------- Grid & Cards --------- */
.grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 18px }
.card {
  display: block; border-radius: 18px; overflow: hidden;
  background: var(--card);
  border: 1px solid var(--card-border);
  color: var(--card-fg);
  box-shadow: none;
  transition: transform .18s ease, box-shadow .22s ease, border-color .22s ease;
}
.card:hover { transform: translateY(-4px); box-shadow: var(--shadow); border-color: color-mix(in oklab, var(--card-border) 40%, var(--white) 60%) }
.thumb { height: 170px; background-size: cover; background-position: center }
.card-body { padding: 14px }
.card-title { font-weight: 800; margin-bottom: 6px }
.card-desc { color: color-mix(in oklab, var(--card-fg) 92%, transparent) }
.tags { margin-top: 6px }
.tags span {
  display: inline-block; margin: 6px 8px 0 0; font-size: .8rem; padding: .15rem .55rem; border-radius: 999px;
  background: color-mix(in oklab, var(--muted) 22%, transparent);
  color: var(--section-fg);
  border: 1px solid color-mix(in oklab, var(--muted) 35%, transparent);
}

/* --------- Lists / Publications --------- */
.list { display: grid; gap: 14px; margin: 0; padding: 0; list-style: none }

/* 作者底線強調 */
.author-highlight {
  font-weight: 900;
  position: relative;
  display: inline-block;
  text-decoration: none;
}
.author-highlight::after {
  content: "";
  position: absolute;
  left: 0; right: 0;
  bottom: -0.14em;
  height: 0.08em;
  background: currentColor;
  opacity: .75;
  border-radius: 2px;
}
.author-highlight:hover::after { opacity: .95; }

/* --------- Contact / Footer --------- */

/* 預設（淺色模式）聯絡區比背景亮一點 */
#contact.section.alt {
  background: color-mix(in oklab, var(--bg) 75%, white 10%);
  color: var(--text);
  border-top: 1px solid var(--divider);
}

/* 淺色模式下頁尾更深一階 */
.footer {
  background: color-mix(in oklab, var(--bg) 90%, black 15%);
  color: color-mix(in oklab, var(--section-fg) 82%, var(--muted) 18%);
  border-top: 1px solid rgba(255,255,255,0.08);
}

/* ---------- 夜間主題回復原始深色層次 ---------- */
[data-theme="dark"] #contact.section.alt {
  background: var(--bg-2);     /* 回復原設定：深藍層 */
  color: var(--text);
  border-top: 1px solid var(--divider);
}

[data-theme="dark"] .footer {
  background: var(--bg);       /* Footer 回歸原深底 */
  color: color-mix(in oklab, var(--section-fg) 82%, var(--muted) 18%);
  border-top: 1px solid var(--divider);
}


/* 頁尾比聯絡區更深 */
.footer {
  background: color-mix(in oklab, var(--bg) 90%, black 15%);
  color: color-mix(in oklab, var(--section-fg) 82%, var(--muted) 18%);
  border-top: 1px solid rgba(255,255,255,0.08);
}

/* --------- Responsive --------- */
@media (max-width: 720px) {
  .hero { padding: 64px 0 44px }
  .nav-inner { padding: 8px 0 }
  .links a { display: none }
}
